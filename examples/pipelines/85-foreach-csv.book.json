{
    "title": "✨ Write email for each customer",
    "pipelineUrl": "https://promptbook.studio/examples/foreach-csv.book.md",
    "description": "Show how to iterate over a table of customers and write an email for each.",
    "formfactorName": "GENERIC",
    "parameters": [
        {
            "name": "customers",
            "description": "Customer names each customer on each row",
            "isInput": true,
            "isOutput": false,
            "exampleValues": [
                "First name,Last name,Note\nAlice,Springfield,Extremely important customer\nJohn,Snow,More informally in Scottish English\nPavol,Hejný,\"Writes in Czech language\nLives in and loves the Prague, please mention it every communication\""
            ]
        },
        {
            "name": "emails",
            "description": "Greeting to each customer on each row",
            "isInput": false,
            "isOutput": true
        }
    ],
    "tasks": [
        {
            "taskType": "PROMPT_TASK",
            "name": "write-a-email",
            "title": "Write a email",
            "content": "Write an email from Coolstore shop to customer \"{firstName} {lastName}\". Inform him about new product fluorescent Uranium Glass Garden Gnome with build-in UV LED light.\n\n## Rules\n\n-   Write just an text of email, nothing else\n-   {note}",
            "resultingParameterName": "emails",
            "foreach": {
                "formatName": "CSV",
                "subformatName": "ROW",
                "parameterName": "customers",
                "inputSubparameterNames": [
                    "firstName",
                    "lastName",
                    "note"
                ],
                "outputSubparameterName": "email"
            },
            "personaName": "Jane",
            "dependentParameterNames": [
                "customers",
                "knowledge"
            ],
            "preparedContent": "{content}\n\n## Knowledge\n\n{knowledge}"
        }
    ],
    "personas": [
        {
            "name": "Jane",
            "description": "customer service representative and skilled copywriter for eshop",
            "modelRequirements": {
                "modelVariant": "CHAT",
                "modelName": "gpt-4-turbo",
                "systemMessage": "You are a friendly and knowledgeable customer service representative and skilled copywriter for an e-commerce shop. Your role is to assist customers with inquiries, provide product information, and craft compelling product descriptions. Always maintain a helpful and positive tone, prioritize customer satisfaction, and use your copywriting skills to effectively communicate the value of products.",
                "temperature": 0.7
            },
            "preparationIds": [
                1
            ]
        }
    ],
    "preparations": [
        {
            "id": 1,
            "promptbookVersion": "0.79.0",
            "usage": {
                "price": {
                    "value": 0.0054540000000000005
                },
                "input": {
                    "tokensCount": {
                        "value": 1173
                    },
                    "charactersCount": {
                        "value": 3268
                    },
                    "wordsCount": {
                        "value": 581
                    },
                    "sentencesCount": {
                        "value": 53
                    },
                    "linesCount": {
                        "value": 72
                    },
                    "paragraphsCount": {
                        "value": 20
                    },
                    "pagesCount": {
                        "value": 2
                    }
                },
                "output": {
                    "tokensCount": {
                        "value": 129
                    },
                    "charactersCount": {
                        "value": 577
                    },
                    "wordsCount": {
                        "value": 79
                    },
                    "sentencesCount": {
                        "value": 5
                    },
                    "linesCount": {
                        "value": 15
                    },
                    "paragraphsCount": {
                        "value": 2
                    },
                    "pagesCount": {
                        "value": 1
                    }
                }
            }
        }
    ],
    "knowledgeSources": [
        {
            "name": "source-coolstore-is-an-esho-54af0da6e247e295bb29",
            "sourceContent": "Coolstore is an eshop that sells various hobby, home and garden products. It has a wide range of products from garden gnomes to kitchen gadgets.\nIt has 3 physical stores in the UK and a large online store that operates in the UK + EU + Switzerland. Key benefits are fast delivery and excellent customer service with a personal touch.",
            "preparationIds": [
                1
            ]
        },
        {
            "name": "source-uranium-glass-garden-77d2bea40f9d5065b9ff",
            "sourceContent": "Uranium Glass Garden Gnomes are the newest product in the eshop. They are made of glass with a fluorescent uranium oxide added to the glass mixture. The gnomes are equipped with a UV LED light that makes them glow in the dark. They are great for scaring away birds and snakes.",
            "preparationIds": [
                1
            ]
        }
    ],
    "knowledgePieces": []
}
